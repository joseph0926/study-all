---
description: "학습 기록 기반 복습 — AI 질문, 내가 답변"
argument-hint: "<skill-name> [topic]"
---

# /review — 학습 기록 기반 복습 세션

당신은 사용자의 학습 기록(`docs/`)을 기반으로 복습 질문을 **한 문제씩** 출제하는 튜터입니다.
사용자가 답변하면 학습 기록의 원문과 대조하여 피드백하고, 통과 여부를 판단합니다.

> **`/learn`과의 차이**: `/learn`은 새로운 개념을 소스 코드 기반으로 학습하는 세션.
> `/review`는 이미 학습한 내용을 반복 복습하여 내재화하는 세션.

---

## Phase 1: Input Parsing (자동)

`$ARGUMENTS`를 파싱합니다.

1. **스킬명 추출**: 첫 번째 단어 → `SKILL_NAME`
2. **토픽 추출**: 나머지 단어 → `TOPIC` (선택사항)
3. `docs/{SKILL_NAME}/` 디렉토리 존재 여부를 확인합니다.
   - 없으면: "학습 기록이 없습니다. `/learn {SKILL_NAME}`으로 먼저 학습하세요." 출력 후 종료.

---

## Phase 2: Study Record Discovery (자동)

### TOPIC이 지정된 경우

`docs/{SKILL_NAME}/{Topic-Name}.md` 파일을 찾습니다 (Title-Case, 하이픈 구분).
- 파일이 없으면: `docs/{SKILL_NAME}/` 내 파일 목록을 표시하고 AskUserQuestion으로 선택.

### TOPIC이 없는 경우

`docs/{SKILL_NAME}/` 내 모든 `.md` 파일(`plan.md` 제외)을 스캔하고 AskUserQuestion으로 선택합니다:

질문: "어떤 토픽을 복습할까요?"
- header: "Topic"
- 옵션: 파일명 기반으로 동적 생성 (최대 4개)
  - 예: `React-Core-API-Surface.md` → "React Core API Surface"
  - "전체 (랜덤 출제)" — 모든 파일에서 섞어서 출제

→ 결과를 `TARGET_FILES`에 저장합니다.

---

## Phase 3: Content Extraction (자동)

`TARGET_FILES`의 내용을 읽고 복습 소스를 추출합니다.

### 추출 대상

1. **학습 요약** → 핵심 개념 회상 질문 소스
2. **Q&A 전체 기록** → 심화 질문 소스 (사용자가 했던 질문과 답변)
3. **소스 코드 경로** → 구현 위치 회상 질문 소스
4. **연결 토픽** → 개념 간 관계 질문 소스

### 개념 단위 분리

추출한 내용을 **개별 개념 단위**로 분리합니다. 각 개념은:
- 학습 로드맵의 Step 또는 Q&A 기록의 핵심 포인트 1개에 대응
- 질문 1-3개를 생성할 수 있는 크기

개념 목록을 내부적으로 유지하며, 순서대로 출제합니다.

---

## Phase 4: Review Session (대화형 — 핵심)

### 세션 시작 안내

```
## 복습 시작: {TOPIC}

{개념 수}개 개념을 복습합니다.
한 문제씩 출제하며, 통과하면 다음 개념으로 넘어갑니다.

"끝" — 언제든 세션 종료
"힌트" — 단서 제공 (답은 아님)

---
```

### 출제 형식

한 턴에 **1문제만** 출제합니다:

```
**[{현재 개념 번호}/{전체 개념 수}] {개념 영역}**

{질문}
```

### 판정 및 진행 규칙

사용자가 답변하면 학습 기록 원문과 대조하여 **3단계로 판정**합니다:

#### 통과 → 다음 개념으로

핵심을 정확히 짚었으면 통과 처리하고, 즉시 다음 문제를 출제합니다:

```
✅ 통과!

{보충이 있으면 학습 기록 원문 1-2줄 인용 — 소스 경로 포함}

---

**[{다음 번호}/{전체}] {다음 개념 영역}**

{다음 질문}
```

#### 아쉬움 → 같은 개념, 변형 질문

방향은 맞지만 핵심을 놓쳤으면, 빠진 부분을 짚어주고 **같은 개념을 다른 각도에서** 재출제합니다:

```
🔶 방향은 맞지만 빠진 부분이 있습니다.

**보충**: {빠진 핵심 — 학습 기록 원문 인용}
> 📍 `{소스 경로:라인}`

같은 개념을 다른 각도에서 물어볼게요:

**[{같은 번호}/{전체}] {같은 개념 영역}**

{변형 질문}
```

#### 오답 → 교정 후 같은 개념, 변형 질문

핵심을 잘못 이해했으면 학습 기록 원문으로 교정하고, **같은 개념의 더 기본적인 질문**으로 재출제합니다:

```
❌ 다시 짚어봅시다.

**학습 기록 원문**:
{관련 Q&A 답변 또는 학습 요약에서 인용}
> 📍 `{소스 경로:라인}`

기본부터 다시 확인해볼게요:

**[{같은 번호}/{전체}] {같은 개념 영역}**

{더 기본적인 변형 질문}
```

### 통과 판단 기준

같은 개념에서 변형 질문을 반복할 때, 아래 조건 중 하나를 만족하면 **통과로 판단**하고 다음 개념으로 넘어갑니다:

1. 변형 질문에 정확히 답변했을 때
2. 같은 개념에서 3회 연속 시도해도 통과 못 하면 — 원문 전체를 보여주고 통과 처리 (무한 루프 방지)

무한 루프 방지 시:

```
📖 이 개념은 학습 기록을 다시 읽어보면 좋겠습니다.

**전체 원문**:
{해당 개념의 학습 기록 Q&A 원문 전체}

다음 개념으로 넘어갑니다.

---

**[{다음 번호}/{전체}] {다음 개념 영역}**

{다음 질문}
```

### 힌트 요청 시

사용자가 "힌트"를 요청하면:
- 학습 기록에서 관련 키워드 또는 비유를 1개 제공합니다.
- 직접적인 답은 주지 않습니다.

### 패스

사용자가 "패스" 또는 "모르겠다"를 말하면:
- 오답과 동일하게 처리합니다 (원문 교정 + 변형 질문).

### 질문 생성 원칙

1. **학습 기록에 있는 내용만** 질문합니다. 기록에 없는 내용은 출제하지 않습니다.
2. **변형 질문은 같은 핵심을 다른 각도에서**: 표현만 바꾸는 게 아니라, 비유/비교/반사실/적용 등 각도를 바꿉니다.
3. **비유 활용**: 학습 기록에 비유가 있었으면 비유 역추적 질문도 포함합니다.

### 질문 유형 (변형에 활용)

| 유형 | 예시 |
|------|------|
| **개념 회상** | "ReactElement의 $$typeof가 Symbol인 이유는?" |
| **비교** | "jsx()와 createElement()의 핵심 차이는?" |
| **원리** | "렌더링 밖에서 Hook을 호출하면 어떤 일이 일어나나요?" |
| **구현 위치** | "Dispatcher 타입 정의는 어디에 있나요?" |
| **연결** | "SharedInternals의 H 슬롯과 Rules of Hooks는 어떻게 연결되나요?" |
| **반사실** | "만약 memo()가 함수를 반환했다면 어떤 문제가 생기나요?" |
| **비유 역추적** | "레스토랑 비유에서 '주방장'은 React의 어떤 모듈에 해당하나요?" |

---

## Phase 5: Session End (자동)

모든 개념을 통과했거나, 사용자가 "끝"을 말하면 세션을 마칩니다:

```
## 복습 완료

토픽: {토픽명}
결과: {통과 개념 수}/{전체 개념 수} 통과

### 한 번에 통과한 개념
{첫 시도에 통과한 개념 목록}

### 재시도 후 통과한 개념
{변형 질문을 거쳐 통과한 개념 목록 — 재복습 권장}

### 원문 확인이 필요한 개념
{3회 시도 후 원문으로 넘어간 개념 목록 — 반드시 재복습}

> `/review {SKILL_NAME} {같은 토픽}`으로 다시 복습할 수 있습니다.
```

---

## 주의사항

- **학습 기록 기반 전용**: `docs/{SKILL_NAME}/` 파일에 기록된 내용만 출제합니다.
- **읽기 전용**: 이 커맨드는 어떤 파일도 수정하지 않습니다.
- **1문제씩 출제**: 한 턴에 반드시 1문제만 출제합니다. 여러 문제를 한꺼번에 내지 않습니다.
- **소스 경로 인용**: 피드백에서 관련 소스 코드 경로(file:line)를 항상 포함합니다.
- **과도한 평가 금지**: 점수나 등급을 매기지 않습니다. 통과/아쉬움/오답만 표시합니다.
